Utils=function Utils(){this.addCommas=function addCommas($nStr$$){$nStr$$=String($nStr$$);for(var $rgx$$=/(\d+)(\d{3})/;$rgx$$.test($nStr$$);)$nStr$$=$nStr$$.replace($rgx$$,"$1,$2");return $nStr$$};return this}();function Log($s$$){try{console.log($s$$)}catch($e$$){}}function Event($$type$$,$$target$$){this.target=$$target$$;this.type=$$type$$}
EventManager=function(){this.events=[];this.addEvent=function $this$addEvent$($eventType$$,$observer$$,$broadcaster$$,$method$$){this.events.push({observer:$observer$$,method:$method$$,broadcaster:$broadcaster$$,eventType:$eventType$$})};this.dispatchEvent=function $this$dispatchEvent$($eventType$$,$target$$){for(var $i$$ in this.events){var $eType$$=this.events[$i$$].eventType,$observer$$=this.events[$i$$].observer,$method$$=this.events[$i$$].method;b=this.events[$i$$].broadcaster;if($eType$$==$eventType$$&&
$target$$==b){$method$$.call($observer$$,new Event($eType$$,$target$$));return true}}};this.removeEventListener=function $this$removeEventListener$($eventType$$,$observer$$){var $e$$,$o$$,$i$$;for($i$$ in this.events){$e$$=this.events[$i$$].eventType;$o$$=this.events[$i$$].observer;$e$$==$eventType$$&&$observer$$==$o$$&&this.events.splice($i$$,1)}};return this}();
function EventDispatcher(){function $addEventListener$$($eventName$$,$func$$){$e$$.addEvent($eventName$$,$addEventListener$$.caller,this,$func$$)}var $e$$=EventManager;this.addEventListener=$addEventListener$$;this.dispatchEvent=function dispatchEvent($type$$,$target$$){$e$$.dispatchEvent($type$$,$target$$)}}
TweetParser=function TweetParser(){var $httpReg$$=/(http|https|ftp)([^ ]+)/gi,$userNameReg$$=/(^|)@(\w+)/g,$hashReg$$=/(^|)#(\w+)/g;this.parse=function parse($str$$7_str$$inline_14_str$$inline_23_str$$){var $hashArray$$inline_15_linkArray$$inline_6_userArray$$=$str$$7_str$$inline_14_str$$inline_23_str$$.match($httpReg$$);if($hashArray$$inline_15_linkArray$$inline_6_userArray$$!=null)for(var $total$$inline_16_total$$inline_25_total$$=$hashArray$$inline_15_linkArray$$inline_6_userArray$$.length-1,$i$$inline_17_i$$inline_26_i$$=
0;$i$$inline_17_i$$inline_26_i$$<=$total$$inline_16_total$$inline_25_total$$;$i$$inline_17_i$$inline_26_i$$++){replaceString="<a href='"+$hashArray$$inline_15_linkArray$$inline_6_userArray$$[$i$$inline_17_i$$inline_26_i$$]+"' target='_blank' rel='nofollow' class='twitter-timeline-link'>"+$hashArray$$inline_15_linkArray$$inline_6_userArray$$[$i$$inline_17_i$$inline_26_i$$]+"</a>";$str$$7_str$$inline_14_str$$inline_23_str$$=$str$$7_str$$inline_14_str$$inline_23_str$$.replace($hashArray$$inline_15_linkArray$$inline_6_userArray$$[$i$$inline_17_i$$inline_26_i$$],
replaceString)}$hashArray$$inline_15_linkArray$$inline_6_userArray$$=$str$$7_str$$inline_14_str$$inline_23_str$$.match($hashReg$$);if($hashArray$$inline_15_linkArray$$inline_6_userArray$$!=null){$total$$inline_16_total$$inline_25_total$$=$hashArray$$inline_15_linkArray$$inline_6_userArray$$.length-1;for($i$$inline_17_i$$inline_26_i$$=0;$i$$inline_17_i$$inline_26_i$$<=$total$$inline_16_total$$inline_25_total$$;$i$$inline_17_i$$inline_26_i$$++){replaceString="<a href='http://search.twitter.com/search?q="+
$hashArray$$inline_15_linkArray$$inline_6_userArray$$[$i$$inline_17_i$$inline_26_i$$].replace("#","%23")+"'>"+$hashArray$$inline_15_linkArray$$inline_6_userArray$$[$i$$inline_17_i$$inline_26_i$$]+"</a>";$str$$7_str$$inline_14_str$$inline_23_str$$=$str$$7_str$$inline_14_str$$inline_23_str$$.replace($hashArray$$inline_15_linkArray$$inline_6_userArray$$[$i$$inline_17_i$$inline_26_i$$],replaceString)}}$hashArray$$inline_15_linkArray$$inline_6_userArray$$=$str$$7_str$$inline_14_str$$inline_23_str$$.match($userNameReg$$);
if($hashArray$$inline_15_linkArray$$inline_6_userArray$$!=null){$total$$inline_16_total$$inline_25_total$$=$hashArray$$inline_15_linkArray$$inline_6_userArray$$.length-1;for($i$$inline_17_i$$inline_26_i$$=0;$i$$inline_17_i$$inline_26_i$$<=$total$$inline_16_total$$inline_25_total$$;$i$$inline_17_i$$inline_26_i$$++){replaceString="<a href='http://twitter.com/"+$hashArray$$inline_15_linkArray$$inline_6_userArray$$[$i$$inline_17_i$$inline_26_i$$]+"'>"+$hashArray$$inline_15_linkArray$$inline_6_userArray$$[$i$$inline_17_i$$inline_26_i$$]+
"</a>";$str$$7_str$$inline_14_str$$inline_23_str$$=$str$$7_str$$inline_14_str$$inline_23_str$$.replace($hashArray$$inline_15_linkArray$$inline_6_userArray$$[$i$$inline_17_i$$inline_26_i$$],replaceString)}}return $str$$7_str$$inline_14_str$$inline_23_str$$};this.swapHash=function swapHash($s$$){$s$$.replace("#","%23");return $s$$};return this}();TRModel.prototype=new EventDispatcher;TRModel.constructor=TRModel;TRModel.constructor.id=0;
function TRModel($s$$){var $self$$=this,$data$$,$type$$;this.id="TR_MODEL - "+ ++TRModel.constructor.id;this.getStream=function $this$getStream$(){return $s$$};this.getData=function $this$getData$(){return $data$$};this.setType=function $this$setType$($t$$){$type$$=$t$$};this.getType=function $this$getType$(){return $type$$};this.load=function $this$load$(){$.ajax({url:$s$$,dataType:"jsonp",success:$onStreamLoaded$$,error:$onStreamError$$})};this.toString=function $this$toString$(){return"TRModel: "+
this.id};var $onStreamError$$=function $$onStreamError$$$(){},$onStreamLoaded$$=function $$onStreamLoaded$$$($d$$){$data$$=$d$$;dispatchEvent("onDataChange",$self$$)}}
function Tweet(){var $htmlText$$,$self$$=this,$screenName$$,$userName$$,$celebBadge$$='<span class="badge-celebrity">Celeb</span>';this.setData=function setData($d$$){$htmlText$$=TweetParser.parse($d$$.text);$self$$.tweetID=$d$$.id;$screenName$$=$d$$.user.screen_name;$userName$$=$d$$.user.name;profileImg=$d$$.user.profile_image_url;$celebBadge$$=$self$$.celeb?$celebBadge$$:"";$self$$.html='<div class="tweet">   <div class="tweet-bg">       <div class="tweet-profile-image">\t\t      <a href="http://www.twitter.com/#!/'+
$screenName$$+'"><img src="'+profileImg+'" alt="'+$userName$$+'" /></a> \t  </div>       <div class="tweet-copy-block"> \t      <div class="tweet-name">\t              <a class="tweet-name-screen" href="http://www.twitter.com/#!/'+$screenName$$+'" title="'+$userName$$+'">@'+$screenName$$+'</a> <span class="tweet-name-full">'+$userName$$+"</span>"+$celebBadge$$+'<a href="#null" class="expert-bio">Bio</a>           </div> \t      <div class="tweet-text">\t              '+$htmlText$$+'\t          </div>\t\t      <div class="tweet-utility">\t\t          <a href="http://www.twitter.com/#!/'+
$screenName$$+"/status/"+$self$$.tweetID+'" class="tweet-timestamp" title="12:31 PM Feb 3rd">5 hours ago</a> <span class="tweet-actions"><a href="#null" class="action-retweet" title="Retweet"><span><i><\!--icon--\></i><b>Retweet</b></span></a><a href="#null" class="action-reply" title="Reply"><span><i><\!--icon--\></i><b>Reply</b></span></a><a href="#null" class="action-follow" title="Follow"><span><i><\!--icon--\></i><b>Follow</b></span></a></span>\t\t      </div>\t      </div>   </div></div>'};
this.celeb=false;return this}
function TweetStats(){function $updateTotal$$(){$totalCount$$.text(Utils.addCommas(Math.round($self$$.totalTweets)))}var $self$$=this,$totalCount$$=$("#total-tweets"),$tweetsPerSec$$=$("#total-tweets-second");this.totalTweetsPerSec=this.totalTweets=0;this.toString=function toString(){return"TweetSats"};(function setTotalTweets($n$$){totalTweets=$n$$;$totalCount$$.text(Utils.addCommas($n$$));(new TWEEN.Tween($self$$)).onUpdate($updateTotal$$).to({totalTweets:3E3},4E3).start();setInterval(TWEEN.update,
1E3/31)})(this.totalTweets);(new TWEEN.Tween($self$$)).onUpdate(function updateTweetsPerSec(){$tweetsPerSec$$.text(Utils.addCommas(Math.round($self$$.totalTweetsPerSec)))}).to({totalTweetsPerSec:250},4E3).start();setInterval(TWEEN.update,1E3/31);return this}function TweetCount(){var $element$$=$("#loadmore-count"),$count$$=0;this.setCount=function setCount($n$$){$count$$=$n$$;$element$$.text(String($count$$)+" new "+($count$$==1?"Tweet":"Tweets"))};return this}TweetList.prototype=new EventDispatcher;
TweetList.constructor=TweetList;
function TweetList($URL$$){function $dataChanged$$($data$$13_e$$){$data$$13_e$$=$data$$13_e$$.target.getData();for(var $i$$=0,$total$$=$data$$13_e$$.length-1,$t$$;$i$$<=$total$$;$i$$++){$t$$=new Tweet;$t$$.setData($data$$13_e$$[$i$$]);$tweets$$.push({tweet:$t$$,id:$i$$})}dispatchEvent("tweetListLoaded",$self$$)}function $show$$(){for(var $html$$="",$tweet$$,$total$$=$tweets$$.length-1;i<=$total$$;i++){$tweet$$=$tweets$$[i].tweet;$html$$+=$tweet$$.html}$self$$.element.html($html$$);$decorate$$();$self$$.element.insertAfter("#loadmore");
$self$$.element&&$self$$.element.fadeIn(250,null,function(){dispatchEvent("onShowing",$self$$)})}function $decorate$$(){$self$$.element.find(".tweet .tweet-utility").fadeTo("fast",0.2,null);$self$$.element.find(".tweet").hover(function(){$(".tweet-utility",this).stop().fadeTo("slow",1)},function(){$(".tweet-utility",this).stop().fadeTo("slow",0.2)})}var $self$$=this,$model$$=new TRModel($URL$$),$tweets$$=[];this.element=null;this.show=$show$$;this.hide=function hide(){$self$$.element&&$self$$.element.fadeOut(250,
null,function(){$self$$.element.detach();dispatchEvent("onHidden",$self$$)})};this.id=$URL$$;this.show=$show$$;this.toString=function toString(){return"Tweetlist"};this.load=function load(){$model$$.addEventListener("onDataChange",$dataChanged$$);$model$$.load()};return this}
function TweetListController($celebExpertList_server$$){function $select$$($id$$){$last$$!=null&&$last$$.hide();for(i in $lists$$)if($lists$$[i].id==$id$$){$id$$=$lists$$[i].obj;if($last$$==null){$id$$.show();$tweetCount$$.setCount(0)}$last$$=$id$$;break}}function $onHidden$$(){$last$$.show();$tweetCount$$.setCount(0)}var $celebList$$=new TweetList($celebExpertList_server$$+"javascript.json");$celebList$$.id="celebList";var $expertList$$=new TweetList($celebExpertList_server$$+"actionscript.json");
$expertList$$.id="expertList";$celebExpertList_server$$=new TweetList($celebExpertList_server$$+"goldenglobestest.json");$celebExpertList_server$$.id="all";var $pixTweets$$=new TweetList("http://tr-cache-2.appspot.com/massrelevance/oscars-pix.json");$pixTweets$$.id="photoTweets";var $tweetCount$$=new TweetCount,$last$$=null,$lists$$=[];this.select=$select$$;$celebList$$.load();$expertList$$.load();$celebExpertList_server$$.addEventListener("tweetListLoaded",function celebExpertListLoaded(){$select$$("all")});
$celebExpertList_server$$.load();$pixTweets$$.addEventListener("tweetListLoaded",function onPhotosLoaded(){Log("** photos loaded ***")});$pixTweets$$.load();$celebList$$.addEventListener("onHidden",$onHidden$$);$expertList$$.addEventListener("onHidden",$onHidden$$);$celebExpertList_server$$.addEventListener("onHidden",$onHidden$$);$celebList$$.hide();$celebList$$.element=$("#main-timeline").clone();$lists$$.push({obj:$celebList$$,id:"celebList"});$expertList$$.element=$("#main-timeline").clone();
$lists$$.push({obj:$expertList$$,id:"expertList"});$celebExpertList_server$$.element=$("#main-timeline").clone();$lists$$.push({obj:$celebExpertList_server$$,id:"all"});$("#main-timeline").detach();return this}FilterNav.prototype=new EventDispatcher;FilterNav.constructor=FilterNav;
function FilterNav(){function $onClick$$(){var $id$$=$(this).attr("id");$(this).parent().toggleClass("down",true);$self$$.filter=$id$$;$id$$!="filter-all"&&$("#filter-all").parent().toggleClass("down",false);$id$$!="filter-celebList"&&$("#filter-celebList").parent().toggleClass("down",false);$id$$!="filter-expertList"&&$("#filter-expertList").parent().toggleClass("down",false);dispatchEvent("onFilterChange",$self$$)}var $self$$=this,$all$$=$("#filter-all"),$celebs$$=$("#filter-celebList"),$experts$$=
$("#filter-expertList");this.filter=null;$all$$.click($onClick$$);$celebs$$.click($onClick$$);$experts$$.click($onClick$$)}$(document).ready(function(){new Application});function Application(){var $mainTweetLists$$=new TweetListController("http://tr-cache-2.appspot.com/smithandrobot/"),$filterNav$$=new FilterNav;new TweetStats;$filterNav$$.addEventListener("onFilterChange",function onFilterChange($e$$){$e$$=$e$$.target.filter.split("filter-")[1];$mainTweetLists$$.select($e$$)})};